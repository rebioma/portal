{ 
	"number_of_replicas": "1",
	"number_of_shards": "1",
	"analysis": {
	   "analyzer": {
		   	"edge_ngram_analyzer": {
		        "type":      "custom",
		        "tokenizer" : "edge_ngram_tokenizer",
				"char_filter": ["html_strip", "my_mapping_char_filter"],
		        "filter": ["stopwords", "asciifolding", "lowercase", "english_snowball", "remove_doublon", "word_delimiter"]
		    },
		    "ngram_analyzer": {
		    	"type":      "custom",
		        "tokenizer" : "ngram_tokenizer",
				"char_filter": ["html_strip", "my_mapping_char_filter"],
		        "filter": ["stopwords", "asciifolding", "lowercase", "english_snowball", "remove_doublon", "word_delimiter"]
		    },
		  	"standard_no_doublon": {
		  		"type": "custom",
				"tokenizer": "standard",
				"char_filter": ["html_strip", "my_mapping_char_filter"],
		        "filter": ["stopwords", "asciifolding", "lowercase", "english_snowball", "remove_doublon", "word_delimiter"]
		  	},
		  	"email": {
	          "tokenizer": "uax_url_email",
	          "filter": ["email","lowercase","unique"]
	        }
	   },
	   "char_filter" : {
	   		"my_mapping_char_filter": {
	   			"type": "mapping",
	   			"mappings": ["y=>i", "ph=>f", ",=> " ]
	   		}
	   },
	   "tokenizer" : {
            "ngram_tokenizer" : {
                "type" : "nGram",
                "min_gram" : "4",
                "max_gram" : "30",
                "token_chars": [ "letter", "digit" ]
            },
            "edge_ngram_tokenizer":{
            	"type" : "edgeNGram",
                "min_gram" : "3",
                "max_gram" : "30",
                "token_chars": [ "letter", "digit" ]
            }
        },
	   "filter": {
	   	  "stopwords": {
          	"type": "stop",
          	"stopwords": "_english_"
          },	
		  "remove_doublon": {
			 "type": "pattern_replace",
			 "pattern": "(\\p{Alpha})\\1",
			 "replacement": "$1"
		  },
		  "english_snowball": {
		  	 "type": "snowball",
		  	 "language" : "English"
		  },
		  "email": {
	          "type": "pattern_capture",
	          "preserve_original": true,
	          "patterns": ["([^@]+)", "(\\p{L}+)", "(\\d+)", "@(.+)", "([^-@]+)"]
        }
	   }
	}
}